<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cek Keberuntungan</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
            height: 100vh;
            background-image: url('https://i.ibb.co/qD1GR5L/360-F-576317873-Pagt-Pi7-H8r-YQw-Hgf-BSD7-Op-Lz-D3-Wlsnvn.jpg');
            background-size: cover;
            background-position: center center;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        h1, p, .result, .game {
            color: #fff;
        }
        input, button {
            padding: 10px;
            font-size: 16px;
            margin-top: 20px;
            border-radius: 5px;
        }
        input {
            border: 2px solid #4CAF50;
        }
        button {
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 30px;
            font-size: 24px;
            font-weight: bold;
        }
        .game {
            margin-top: 20px;
            font-size: 18px;
        }
        .game img {
            max-width: 300px;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <h1>Seberapa Beruntung Kamu Hari Ini?</h1>
    <p>Masukkan User ID kamu untuk mengecek keberuntungan!</p>
    <input type="text" id="nameInput" placeholder="Masukkan User ID Anda" />
    <button onclick="checkLuck()">Cek Keberuntungan</button>

    <div id="result" class="result"></div>
    <div id="gameContainer" class="game"></div>

    <script>
        function checkLuck() {
            const name = document.getElementById("nameInput").value;
            if (name === "") {
                alert("Masukkan nama terlebih dahulu!");
                return;
            }
            
            // Mendapatkan tanggal hari ini untuk memastikan reset
            const today = new Date().toISOString().split('T')[0];  // Format YYYY-MM-DD
            
            // Cek apakah keberuntungan sudah dihitung hari ini
            const lastCheckedDate = localStorage.getItem("lastCheckedDate");
            if (lastCheckedDate === today) {
                // Jika sudah dihitung hari ini, ambil hasil dari localStorage
                const luckPercent = parseInt(localStorage.getItem("luckPercent"));
                displayResult(luckPercent);
                return;
            }

            // Fungsi untuk menghasilkan nilai hash berdasarkan nama
            function generateHash(name) {
                let hash = 0;
                for (let i = 0; i < name.length; i++) {
                    hash = (hash << 5) - hash + name.charCodeAt(i);
                }
                return hash;
            }

            // Mendapatkan hash dari nama
            const hashValue = generateHash(name);
            const luckPercent = Math.abs(hashValue) % 100;  // Menghasilkan angka antara 0 hingga 99

            // Menyimpan hasil keberuntungan dan tanggal yang dihitung
            localStorage.setItem("luckPercent", luckPercent);
            localStorage.setItem("lastCheckedDate", today);

            // Menampilkan hasil keberuntungan
            displayResult(luckPercent);
        }

        function displayResult(luckPercent) {
            // Menampilkan hasil keberuntungan
            let resultText = `Keberuntungan kamu: ${luckPercent}%`;
            if (luckPercent > 80) {
                resultText += " - Hari ini adalah hari keberuntunganmu!";
            } else if (luckPercent > 50) {
                resultText += " - Keberuntungan sedang berpihak padamu!";
            } else {
                resultText += " - Mungkin hari ini bukan hari terbaikmu, coba lagi nanti!";
            }

            document.getElementById("result").textContent = resultText;

            // Daftar game dan gambar
            const games = [
                { name: "PG SOFT", image: "https://i.ibb.co/TqYDW31/MAHJONG2.png", minLuck: 90 },
                { name: "PRAGMATIC", image: "https://i.ibb.co/74R3S8Z/KAKEK-ZEUS.png", minLuck: 80 },
                { name: "CQ9", image: "https://i.ibb.co/GtGMK1Z/CQ9.png", minLuck: 60 },
                { name: "AFB GAMING", image: "https://i.ibb.co/31tZykV/AFB-GAMING.png", minLuck: 0 }
            ];

            // Menampilkan game berdasarkan persentase keberuntungan
            const filteredGames = games.filter(game => luckPercent >= game.minLuck);

            // Pilih game secara acak dari game yang sesuai
            if (filteredGames.length > 0) {
                const randomGame = filteredGames[Math.floor(Math.random() * filteredGames.length)];
                document.getElementById("gameContainer").innerHTML = `
                    <p>Game yang cocok untuk kamu: ${randomGame.name}</p>
                    <p>Keberuntungan kamu: ${luckPercent}%</p>
                    <img src="${randomGame.image}" alt="${randomGame.name}">
                `;
            } else {
                document.getElementById("gameContainer").innerHTML = "<p>Hari ini tidak ada game yang cocok, coba lagi nanti!</p>";
            }
        }
    </script>
</body>
</html>
